<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>نظام إدارة الكهرباء</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <script src="../assets/js/tailwind.js"></script>
    <link rel="stylesheet" href="../assets/css/remixicon.css" />
    <link rel="stylesheet" href="../assets/css/main.css" />
  </head>
  <body class="bg-gray-50 min-h-screen">
    <div class="flex h-screen overflow-hidden">
      <!-- Sidebar -->
      <div id="sidebar"></div>
      <!-- Main Content -->
      <main class="flex-1 overflow-y-auto bg-gray-50 p-6">
        <!--!  Header -->
        <div id="header"></div>
        <!--! Admin Tabs -->
        <div class="bg-white rounded shadow mb-6">
          <!-- !+++ -->
          <div class="flex border-b">
            <button
              id="tab-area_address"
              class="tab-btn active px-6 py-4 font-medium text-primary"
            >
              <div class="flex items-center">
                <div class="w-5 h-5 flex items-center justify-center ml-2">
                  <i class="ri-user-line"></i>
                </div>
                <span> إدارة المربعات و المناطق </span>
              </div>
            </button>
            <button
              id="tab-meter"
              class="tab-btn px-6 py-4 font-medium text-gray-500 hover:text-gray-700"
            >
              <div class="flex items-center">
                <div class="w-5 h-5 flex items-center justify-center ml-2">
                  <i class="ri-user-line"></i>
                </div>
                <span> إدارة العدادات المركزية </span>
              </div>
            </button>
            <button
              id="tab-SubscriptionTypes"
              class="tab-btn px-6 py-4 font-medium text-gray-500 hover:text-gray-700"
            >
              <div class="flex items-center">
                <div class="w-5 h-5 flex items-center justify-center ml-2">
                  <i class="ri-cerd-line"></i>
                </div>
                <span> دليل تعرفة الاشتراكات </span>
              </div>
            </button>

            <button
              id="tab-settings"
              class="tab-btn px-6 py-4 font-medium text-gray-500 hover:text-gray-700"
            >
              <div class="flex items-center">
                <div class="w-5 h-5 flex items-center justify-center ml-2">
                  <i class="ri-settings-3-line"></i>
                </div>
                <span>إعدادات النظام</span>
              </div>
            </button>
          </div>
          <!-- ! 1 -->
          <div
            id="content-area_address"
            class="tab-content active bg-white p-6 rounded-lg shadow-sm"
          >
            <!-- عنوان القسم -->
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                <i class="ri-map-2-line text-primary mr-2"></i>
                إدارة المناطق (المربعات) والحارات
              </h3>
              <span
                class="text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full"
                >5 مناطق | 12 مربع | 36 حارة</span
              >
            </div>
            <!-- ! -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-2">
              <!-- !نموذج إضافة منطقة جديدة -->
              <div
                class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-6"
              >
                <div class="flex items-center mb-4">
                  <i class="ri-add-circle-line text-primary text-xl mr-2"></i>
                  <h4 class="text-lg font-semibold text-gray-800">
                    إضافة منطقة جديدة
                  </h4>
                </div>

                <form
                  class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
                >
                  <!-- اسم المنطقة -->
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >اسم المنطقة</label
                    >
                    <input
                      type="text"
                      placeholder="مثال: المنطقة الشمالية"
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"
                    />
                  </div>

                  <!-- رمز المنطقة -->
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >رمز المنطقة</label
                    >
                    <input
                      type="text"
                      placeholder="مثال: A1"
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"
                    />
                  </div>
                  <!-- ملاحظات -->
                  <div class="lg:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >ملاحظات</label
                    >
                    <textarea
                      rows="2"
                      placeholder="أدخل أي ملاحظات..."
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary resize-none"
                    ></textarea>
                  </div>

                  <!-- زر الحفظ -->
                  <div class="flex items-end">
                    <button
                      type="submit"
                      class="w-full bg-primary text-white py-2 rounded-lg hover:bg-primary-dark flex items-center justify-center"
                    >
                      <i class="ri-save-line ml-2"></i>
                      حفظ المنطقة
                    </button>
                  </div>
                </form>
              </div>

              <!--! نموذج إضافة حارة جديدة -->
              <div
                class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-6"
              >
                <div class="flex items-center mb-4">
                  <i class="ri-add-circle-line text-primary text-xl mr-2"></i>
                  <h4 class="text-lg font-semibold text-gray-800">
                    إضافة حارة جديدة
                  </h4>
                </div>

                <form
                  class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
                >
                  <!-- اختيار المربع -->
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >اختر المربع</label
                    >
                    <select
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"
                    >
                      <option>B2 - المنطقة الشمالية</option>
                      <option>C1 - المنطقة الجنوبية</option>
                    </select>
                  </div>

                  <!-- رقم الحارة -->
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >رقم الحارة</label
                    >
                    <input
                      type="text"
                      placeholder="مثال: H5"
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"
                    />
                  </div>
                  <!-- اسم الحارة -->
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >اسم الحارة</label
                    >
                    <input
                      type="text"
                      placeholder="مثال: الحارة الشمالية"
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"
                    />
                  </div>
                  <!-- عدد العدادات -->
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                      رقم العداد المركزي
                    </label>
                    <input
                      type="number"
                      placeholder="12"
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"
                    />
                  </div>

                  <!-- ملاحظات -->
                  <div class="lg:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2"
                      >ملاحظات</label
                    >
                    <textarea
                      rows="2"
                      placeholder="أدخل أي ملاحظات..."
                      class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary resize-none"
                    ></textarea>
                  </div>

                  <!-- زر الحفظ -->
                  <div class="flex items-end">
                    <button
                      type="submit"
                      class="w-full bg-primary text-white py-2 rounded-lg hover:bg-primary-dark flex items-center justify-center"
                    >
                      <i class="ri-save-line ml-2"></i>
                      حفظ الحارة
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <!--! Meter Tab Content -->
          <div
            id="content-meter"
            class="tab-content bg-white p-6 rounded-lg shadow-sm hidden"
          >
            <!-- عنوان القسم -->
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                <i class="ri-dashboard-3-line text-primary mr-2"></i>
                إدارة العدادات المركزية
              </h3>
              <span
                class="text-sm text-gray-500 bg-gray-100 px-3 py-1 rounded-full"
                >24 عداد نشط</span
              >
            </div>

            <!-- نموذج إضافة عداد جديد (ظاهر دائماً) -->
            <div
              class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-6"
            >
              <div class="flex items-center mb-4">
                <i class="ri-add-circle-line text-primary text-xl mr-2"></i>
                <h4 class="text-lg font-semibold text-gray-800">
                  إضافة عداد مركزي جديد
                </h4>
              </div>

              <form
                class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
              >
                <!-- رقم العداد -->
                <div class="relative">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >رقم العداد</label
                  >
                  <input
                    type="text"
                    value="MTR-2024-001"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-gray-800"
                  />
                  <i
                    class="ri-hashtag text-gray-400 absolute left-3 top-10"
                  ></i>
                </div>

                <!-- نوع العداد -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >نوع العداد</label
                  >
                  <select
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary bg-white"
                  >
                    <option selected>عداد ذكي</option>
                    <option>عداد عادي</option>
                    <option>عداد ثلاثي الطور</option>
                  </select>
                </div>

                <!-- القراءة الحالية -->
                <div class="relative">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >القراءة الحالية (kWh)</label
                  >
                  <input
                    type="number"
                    value="45.5"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary text-gray-800"
                  />
                  <i
                    class="ri-flashlight-line text-yellow-500 absolute left-3 top-10"
                  ></i>
                </div>

                <!-- تاريخ التركيب -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >تاريخ التركيب</label
                  >
                  <input
                    type="date"
                    value="2024-03-15"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"
                  />
                </div>

                <!-- الموقع التفصيلي -->
                <div class="lg:col-span-2">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >الموقع التفصيلي</label
                  >
                  <input
                    type="text"
                    value="المبنى الرئيسي - الطابق الثالث - وحدة B-301"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary text-gray-800"
                  />
                </div>

                <!-- الحالة -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >الحالة</label
                  >
                  <select
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary bg-white"
                  >
                    <option selected>نشط</option>
                    <option>معطل</option>
                    <option>تحت الصيانة</option>
                  </select>
                </div>

                <!-- ملاحظات -->
                <div class="lg:col-span-2">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >ملاحظات إضافية</label
                  >
                  <textarea
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary resize-none"
                    rows="2"
                    placeholder="أدخل أي ملاحظات إضافية..."
                  >
عداد جديد تم تركيبه مع نظام مراقبة ذكي</textarea
                  >
                </div>
                <div class="flex items-end">
                  <button
                    type="submit"
                    class="w-full bg-primary text-white py-2 rounded hover:bg-primary-dark flex items-center justify-center"
                  >
                    <i class="ri-save-line ml-2"></i>
                    حفظ العداد
                  </button>
                </div>
              </form>
            </div>

            <!-- قسم البحث والتصفية -->
            <div class="bg-white p-4 rounded-xl shadow-sm mb-4">
              <div class="flex flex-wrap gap-4 items-center">
                <div class="relative flex-1 min-w-64">
                  <input
                    type="text"
                    placeholder="ابحث برقم العداد أو الموقع..."
                    class="w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"
                  />
                  <i
                    class="ri-search-line absolute left-3 top-3 text-gray-400"
                  ></i>
                </div>

                <select
                  class="px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary bg-white"
                >
                  <option>جميع العدادات</option>
                  <option>العدادات النشطة</option>
                  <option>العدادات المعطلة</option>
                  <option>العدادات الذكية</option>
                </select>

                <button
                  class="px-4 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"
                >
                  <i class="ri-filter-3-line ml-1"></i>
                  تصفية متقدمة
                </button>
              </div>
            </div>

            <!-- جدول العدادات -->
            <div class="bg-white rounded-xl shadow-sm overflow-hidden">
              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                  <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
                    <tr>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        رقم العداد
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        نوع العداد
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        القراءة الحالية
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        الموقع
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        تاريخ التركيب
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        الحالة
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        الإجراءات
                      </th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-200">
                    <!-- صف العداد الأول -->
                    <tr class="hover:bg-gray-50 transition-colors">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <div
                            class="w-10 h-10 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm"
                          >
                            M1
                          </div>
                          <div class="mr-3">
                            <div class="text-sm font-medium text-gray-900">
                              MTR-2024-001
                            </div>
                            <div class="text-xs text-gray-500">عداد رئيسي</div>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span
                          class="px-3 py-1 text-xs rounded-full bg-green-100 text-green-800 font-medium"
                        >
                          <i class="ri-wifi-line mr-1"></i>ذكي
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-semibold text-gray-900">
                          45,892.5 kWh
                        </div>
                        <div class="text-xs text-gray-500">
                          آخر تحديث: اليوم
                        </div>
                      </td>
                      <td class="px-6 py-4 text-sm text-gray-700">
                        المبنى الرئيسي - الطابق 3
                      </td>
                      <td class="px-6 py-4 text-sm text-gray-500">
                        15 مارس 2024
                      </td>
                      <td class="px-6 py-4">
                        <span
                          class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"
                        >
                          <span
                            class="w-2 h-2 bg-green-500 rounded-full mr-2"
                          ></span>
                          نشط
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div
                          class="flex items-center space-x-reverse space-x-2"
                        >
                          <button
                            class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                            title="عرض التفاصيل"
                          >
                            <i class="ri-eye-line"></i>
                          </button>
                          <button
                            class="p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                            title="تحديث القراءة"
                          >
                            <i class="ri-edit-line"></i>
                          </button>
                          <button
                            class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                            title="إيقاف مؤقت"
                          >
                            <i class="ri-pause-circle-line"></i>
                          </button>
                        </div>
                      </td>
                    </tr>

                    <!-- صف العداد الثاني -->
                    <tr class="hover:bg-gray-50 transition-colors">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <div
                            class="w-10 h-10 bg-gradient-to-r from-purple-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm"
                          >
                            M2
                          </div>
                          <div class="mr-3">
                            <div class="text-sm font-medium text-gray-900">
                              MTR-2024-002
                            </div>
                            <div class="text-xs text-gray-500">عداد فرعي</div>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span
                          class="px-3 py-1 text-xs rounded-full bg-gray-100 text-gray-800 font-medium"
                        >
                          <i class="ri-electricity-line mr-1"></i>عادي
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-semibold text-gray-900">
                          12,425.8 kWh
                        </div>
                        <div class="text-xs text-gray-500">آخر تحديث: أمس</div>
                      </td>
                      <td class="px-6 py-4 text-sm text-gray-700">
                        مبنى الخدمات - الطابق الأرضي
                      </td>
                      <td class="px-6 py-4 text-sm text-gray-500">
                        20 يناير 2024
                      </td>
                      <td class="px-6 py-4">
                        <span
                          class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"
                        >
                          <span
                            class="w-2 h-2 bg-yellow-500 rounded-full mr-2"
                          ></span>
                          تحت الصيانة
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div
                          class="flex items-center space-x-reverse space-x-2"
                        >
                          <button
                            class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                          >
                            <i class="ri-eye-line"></i>
                          </button>
                          <button
                            class="p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                          >
                            <i class="ri-edit-line"></i>
                          </button>
                          <button
                            class="p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors"
                          >
                            <i class="ri-tools-line"></i>
                          </button>
                        </div>
                      </td>
                    </tr>

                    <!-- صف العداد الثالث -->
                    <tr class="hover:bg-gray-50 transition-colors">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <div
                            class="w-10 h-10 bg-gradient-to-r from-green-500 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm"
                          >
                            M3
                          </div>
                          <div class="mr-3">
                            <div class="text-sm font-medium text-gray-900">
                              MTR-2024-003
                            </div>
                            <div class="text-xs text-gray-500">عداد فرعي</div>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span
                          class="px-3 py-1 text-xs rounded-full bg-green-100 text-green-800 font-medium"
                        >
                          <i class="ri-wifi-line mr-1"></i>ذكي
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-semibold text-gray-900">
                          7,969.2 kWh
                        </div>
                        <div class="text-xs text-gray-500">
                          آخر تحديث: قبل ساعة
                        </div>
                      </td>
                      <td class="px-6 py-4 text-sm text-gray-700">
                        مبنى الموظفين - الطابق 2
                      </td>
                      <td class="px-6 py-4 text-sm text-gray-500">
                        15 يناير 2024
                      </td>
                      <td class="px-6 py-4">
                        <span
                          class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"
                        >
                          <span
                            class="w-2 h-2 bg-green-500 rounded-full mr-2"
                          ></span>
                          نشط
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div
                          class="flex items-center space-x-reverse space-x-2"
                        >
                          <button
                            class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                          >
                            <i class="ri-eye-line"></i>
                          </button>
                          <button
                            class="p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                          >
                            <i class="ri-edit-line"></i>
                          </button>
                          <button
                            class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                          >
                            <i class="ri-delete-bin-line"></i>
                          </button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- الترقيم -->
            <div
              class="flex items-center justify-between mt-6 bg-white p-4 rounded-xl shadow-sm"
            >
              <div class="text-sm text-gray-600">
                <span class="font-medium">24</span> عداد إجمالي
              </div>
              <div class="flex space-x-reverse space-x-1">
                <button
                  class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors"
                >
                  <i class="ri-arrow-right-s-line"></i>
                </button>
                <button
                  class="w-10 h-10 flex items-center justify-center bg-primary text-white rounded-lg font-medium"
                >
                  1
                </button>
                <button
                  class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors"
                >
                  2
                </button>
                <button
                  class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors"
                >
                  <i class="ri-arrow-left-s-line"></i>
                </button>
              </div>
            </div>
          </div>
          <!-- ! 3 -->
          <div
            id="content-SubscriptionTypes"
            class="tab-content bg-white p-6 rounded-lg shadow-sm hidden"
          >
            <!-- عنوان القسم -->
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                <i class="ri-price-tag-3-line text-primary mr-2"></i>
                إدارة تعرفة الاشتراكات
              </h3>
            </div>

            <!-- نموذج إضافة اشتراك جديد (ظاهر دائماً) -->
            <div
              class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mb-6"
            >
              <div class="flex items-center mb-4">
                <i class="ri-add-circle-line text-primary text-xl mr-2"></i>
                <h4 class="text-lg font-semibold text-gray-800">
                  إضافة اشتراك جديد
                </h4>
              </div>

              <form
                class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
              >
                <!-- رقم الاشتراك -->
                <div class="relative">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >رقم الاشتراك</label
                  >
                  <input
                    type="text"
                    value="SUB-2024-001"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-gray-800"
                  />
                  <i
                    class="ri-hashtag text-gray-400 absolute left-3 top-10"
                  ></i>
                </div>

                <!-- اسم الاشتراك -->
                <div class="relative">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >اسم الاشتراك</label
                  >
                  <input
                    type="text"
                    value="اشتراك أسبوعي 1 فاز"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-gray-800"
                  />
                  <i
                    class="ri-price-tag-2-line text-gray-400 absolute left-3 top-10"
                  ></i>
                </div>

                <!-- مبلغ الاشتراك -->
                <div class="relative">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >مبلغ الاشتراك</label
                  >
                  <input
                    type="number"
                    value="400"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent text-gray-800"
                  />
                  <i
                    class="ri-money-cny-circle-line text-gray-400 absolute left-3 top-10"
                  ></i>
                </div>

                <!-- نوع الاشتراك -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >نوع الاشتراك</label
                  >
                  <select
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary bg-white"
                  >
                    <option selected>أسبوعي</option>
                    <option>أسبوعين</option>
                    <option>شهري</option>
                  </select>
                </div>

                <!-- مدة الاشتراك -->
                <div class="relative">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >مدة الاشتراك</label
                  >
                  <input
                    type="number"
                    value="7"
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary text-gray-800"
                  />
                  <i
                    class="ri-time-line text-gray-400 absolute left-3 top-10"
                  ></i>
                </div>

                <!-- الحالة -->
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >الحالة</label
                  >
                  <select
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary bg-white"
                  >
                    <option selected>نشط</option>
                    <option>معطل</option>
                  </select>
                </div>

                <!-- ملاحظات -->
                <div class="lg:col-span-2">
                  <label class="block text-sm font-medium text-gray-700 mb-2"
                    >ملاحظات إضافية</label
                  >
                  <textarea
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary text-gray-800"
                    rows="2"
                    placeholder="أدخل أي ملاحظات إضافية..."
                  >
اشتراك جديد مع خصم 10% للعملاء الجدد</textarea
                  >
                </div>

                <div class="flex items-end">
                  <button
                    type="submit"
                    class="w-full bg-primary text-white py-2 rounded hover:bg-primary-dark flex items-center justify-center"
                  >
                    <i class="ri-save-line ml-2"></i>
                    حفظ الاشتراك
                  </button>
                </div>
              </form>
            </div>

            <!-- قسم البحث والتصفية -->
            <div class="bg-white p-4 rounded-xl shadow-sm mb-4">
              <div class="flex flex-wrap gap-4 items-center">
                <div class="relative flex-1 min-w-64">
                  <input
                    type="text"
                    placeholder="ابحث برقم الاشتراك أو الاسم..."
                    class="w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary"
                  />
                  <i
                    class="ri-search-line absolute left-3 top-3 text-gray-400"
                  ></i>
                </div>

                <select
                  class="px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary bg-white"
                >
                  <option>جميع الاشتراكات</option>
                  <option>الاشتراكات النشطة</option>
                  <option>الاشتراكات المعطلة</option>
                </select>

                <button
                  class="px-4 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"
                >
                  <i class="ri-filter-3-line ml-1"></i>
                  تصفية متقدمة
                </button>
              </div>
            </div>

            <!-- جدول الاشتراكات -->
            <div class="bg-white rounded-xl shadow-sm overflow-hidden">
              <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                  <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
                    <tr>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        رقم الاشتراك
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        اسم الاشتراك
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        النوع
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        المبلغ
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        المدة
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        الحالة
                      </th>
                      <th
                        class="px-6 py-4 text-right text-sm font-semibold text-gray-700"
                      >
                        الإجراءات
                      </th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-gray-200">
                    <!-- صف الاشتراك الأول -->
                    <tr class="hover:bg-gray-50 transition-colors">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <div
                            class="w-10 h-10 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-sm"
                          >
                            S1
                          </div>
                          <div class="mr-3">
                            <div class="text-sm font-medium text-gray-900">
                              SUB-2024-001
                            </div>
                            <div class="text-xs text-gray-500">
                              اشتراك أسبوعي
                            </div>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">
                          اشتراك أسبوعي 1 فاز
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span
                          class="px-3 py-1 text-xs rounded-full bg-blue-100 text-blue-800 font-medium"
                        >
                          <i class="ri-time-line mr-1"></i>أسبوعي
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-semibold text-gray-900">
                          400 ريال
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">
                          7 أيام
                        </div>
                      </td>
                      <td class="px-6 py-4">
                        <span
                          class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"
                        >
                          <span
                            class="w-2 h-2 bg-green-500 rounded-full mr-2"
                          ></span>
                          نشط
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div
                          class="flex items-center space-x-reverse space-x-2"
                        >
                          <button
                            class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                            title="عرض التفاصيل"
                          >
                            <i class="ri-eye-line"></i>
                          </button>
                          <button
                            class="p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                            title="تعديل"
                          >
                            <i class="ri-edit-line"></i>
                          </button>
                          <button
                            class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                            title="تعطيل"
                          >
                            <i class="ri-pause-circle-line"></i>
                          </button>
                        </div>
                      </td>
                    </tr>

                    <!-- صف الاشتراك الثاني -->
                    <tr class="hover:bg-gray-50 transition-colors">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <div
                            class="w-10 h-10 bg-gradient-to-r from-purple-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-sm"
                          >
                            S2
                          </div>
                          <div class="mr-3">
                            <div class="text-sm font-medium text-gray-900">
                              SUB-2024-002
                            </div>
                            <div class="text-xs text-gray-500">
                              اشتراك أسبوعين
                            </div>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">
                          اشتراك أسبوعين مميز
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span
                          class="px-3 py-1 text-xs rounded-full bg-purple-100 text-purple-800 font-medium"
                        >
                          <i class="ri-calendar-line mr-1"></i>أسبوعين
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-semibold text-gray-900">
                          750 ريال
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">
                          14 يوم
                        </div>
                      </td>
                      <td class="px-6 py-4">
                        <span
                          class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"
                        >
                          <span
                            class="w-2 h-2 bg-green-500 rounded-full mr-2"
                          ></span>
                          نشط
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div
                          class="flex items-center space-x-reverse space-x-2"
                        >
                          <button
                            class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                          >
                            <i class="ri-eye-line"></i>
                          </button>
                          <button
                            class="p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                          >
                            <i class="ri-edit-line"></i>
                          </button>
                          <button
                            class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                          >
                            <i class="ri-pause-circle-line"></i>
                          </button>
                        </div>
                      </td>
                    </tr>

                    <!-- صف الاشتراك الثالث -->
                    <tr class="hover:bg-gray-50 transition-colors">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <div
                            class="w-10 h-10 bg-gradient-to-r from-green-500 to-green-600 rounded-full flex items-center justify-center text-white font-bold text-sm"
                          >
                            S3
                          </div>
                          <div class="mr-3">
                            <div class="text-sm font-medium text-gray-900">
                              SUB-2024-003
                            </div>
                            <div class="text-xs text-gray-500">اشتراك شهري</div>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">
                          اشتراك شهري متكامل
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span
                          class="px-3 py-1 text-xs rounded-full bg-green-100 text-green-800 font-medium"
                        >
                          <i class="ri-calendar-month-line mr-1"></i>شهري
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-semibold text-gray-900">
                          1200 ريال
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">
                          30 يوم
                        </div>
                      </td>
                      <td class="px-6 py-4">
                        <span
                          class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"
                        >
                          <span
                            class="w-2 h-2 bg-yellow-500 rounded-full mr-2"
                          ></span>
                          معطل
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div
                          class="flex items-center space-x-reverse space-x-2"
                        >
                          <button
                            class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                          >
                            <i class="ri-eye-line"></i>
                          </button>
                          <button
                            class="p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                          >
                            <i class="ri-edit-line"></i>
                          </button>
                          <button
                            class="p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                          >
                            <i class="ri-play-circle-line"></i>
                          </button>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <!-- الترقيم -->
            <div
              class="flex items-center justify-between mt-6 bg-white p-4 rounded-xl shadow-sm"
            >
              <div class="text-sm text-gray-600">
                <span class="font-medium">3</span> اشتراكات إجمالي
              </div>
              <div class="flex space-x-reverse space-x-1">
                <button
                  class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors"
                >
                  <i class="ri-arrow-right-s-line"></i>
                </button>
                <button
                  class="w-10 h-10 flex items-center justify-center bg-primary text-white rounded-lg font-medium"
                >
                  1
                </button>
                <button
                  class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors"
                >
                  2
                </button>
                <button
                  class="w-10 h-10 flex items-center justify-center border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-100 transition-colors"
                >
                  <i class="ri-arrow-left-s-line"></i>
                </button>
              </div>
            </div>
          </div>
          <!-- ! Settings Tab Content -->
          <div
            id="content-settings"
            class="tab-content bg-white p-6 rounded-lg shadow-sm hidden"
          >
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-lg font-medium text-gray-900">إعدادات النظام</h3>
              <div class="flex space-x-2">
                <button
                  id="editBtn"
                  class="bg-blue-500 text-white px-4 py-2 rounded-button text-sm font-medium flex items-center whitespace-nowrap"
                >
                  <i class="ri-edit-line ml-1"></i> تعديل
                </button>
                <button
                  id="saveChangesBtn"
                  class="hidden bg-green-600 text-white px-4 py-2 rounded-button text-sm font-medium flex items-center whitespace-nowrap"
                >
                  <i class="ri-save-line ml-1"></i> حفظ التغييرات
                </button>
              </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
              <div class="lg:col-span-2">
                <div class="bg-white rounded shadow-sm overflow-hidden">
                  <!-- Tabs Navigation -->
                  <div class="flex border-b">
                    <button
                      class="tab-button active py-3 px-4 text-sm font-medium"
                      data-settings-tab="general"
                    >
                      الإعدادات العامة
                    </button>
                    <button
                      class="tab-button py-3 px-4 text-sm font-medium"
                      data-settings-tab="security"
                    >
                      الأمان والخصوصية
                    </button>
                    <button
                      class="tab-button py-3 px-4 text-sm font-medium"
                      data-settings-tab="notifications"
                    >
                      الإشعارات والتنبيهات
                    </button>
                  </div>

                  <!-- الإعدادات العامة -->
                  <div
                    id="general-settings"
                    class="settings-tab-content active p-5"
                  >
                    <div class="space-y-5">
                      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- ! start input -->

                        <div>
                          <label
                            for="arName"
                            class="block text-sm font-medium text-gray-700 mb-1"
                            >اسم المالك Ar
                          </label>
                          <input
                            id="arName"
                            type="text"
                            readonly
                            class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                          />
                        </div>
                        <div>
                          <label
                            for="en_Name"
                            class="block text-sm font-medium text-gray-700 mb-1"
                            >اسم المالك En
                          </label>
                          <input
                            id="en_Name"
                            type="text"
                            readonly
                            class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                          />
                        </div>
                        <div>
                          <label
                            for="arNameElectrycel"
                            class="block text-sm font-medium text-gray-700 mb-1"
                            >اسم المحطة Ar
                          </label>
                          <input
                            id="arNameElectrycel"
                            type="text"
                            readonly
                            class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                          />
                        </div>
                        <div>
                          <label
                            for="enNameElectrycel"
                            class="block text-sm font-medium text-gray-700 mb-1"
                          >
                            اسم المحطة En
                          </label>
                          <input
                            id="enNameElectrycel"
                            type="text"
                            readonly
                            class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                          />
                        </div>
                        <!-- ! *********** -->

                        <div>
                          <label
                            for="ar_address"
                            class="block text-sm font-medium text-gray-700 mb-1"
                          >
                            العنوان عربي
                          </label>
                          <input
                            id="ar_address"
                            type="text"
                            readonly
                            class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                          />
                        </div>
                        <!-- ! ************************ -->

                        <div>
                          <label
                            for="en_address"
                            class="block text-sm font-medium text-gray-700 mb-1"
                          >
                            العنوان انجليزي</label
                          >
                          <input
                            id="en_address"
                            type="text"
                            readonly
                            class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                          />
                        </div>
                        <!-- ! ************************ -->
                        <div>
                          <label
                            for="email"
                            class="block text-sm font-medium text-gray-700 mb-1"
                            >البريد الإلكتروني للتواصل</label
                          >
                          <input
                            id="email"
                            type="email"
                            readonly
                            class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                          />
                        </div>
                        <div>
                          <label
                            for="phone"
                            class="block text-sm font-medium text-gray-700 mb-1"
                            >رقم الهاتف</label
                          >
                          <input
                            id="phone"
                            type="text"
                            readonly
                            class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                          />
                        </div>

                        <div>
                          <label
                            for="ki"
                            class="block text-sm font-medium text-gray-700 mb-1"
                          >
                            سعر الكيلو
                          </label>
                          <input
                            id="ki"
                            type="text"
                            readonly
                            class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                          />
                        </div>
                        <!-- ! -->
                        <div>
                          <label
                            for="language"
                            class="block text-sm font-medium text-gray-700 mb-1"
                            >اللغة الافتراضية</label
                          >
                          <select
                            id="language"
                            disabled
                            class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                          >
                            <option value="ar">العربية</option>
                            <option value="en">English</option>
                            <option value="fr">Français</option>
                            <option value="es">Español</option>
                          </select>
                        </div>
                        <!-- ! -->
                      </div>

                      <!-- ملاحظات -->
                      <div>
                        <label
                          for="note"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >ملاحظات</label
                        >
                        <textarea
                          id="note"
                          rows="3"
                          readonly
                          class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                        ></textarea>
                      </div>
                    </div>
                  </div>

                  <!-- الأمان والخصوصية -->
                  <div
                    id="security-settings"
                    class="settings-tab-content hidden p-5"
                  >
                    <div class="space-y-5">
                      <div>
                        <label
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >سياسة كلمة المرور</label
                        >
                        <div class="space-y-2 mt-2">
                          <div class="flex items-center">
                            <input
                              type="checkbox"
                              id="policy-strong"
                              disabled
                              class="mr-2"
                            />
                            <label
                              for="policy-strong"
                              class="text-sm text-gray-600"
                              >تفعيل سياسة كلمة المرور القوية</label
                            >
                          </div>
                          <div class="flex items-center">
                            <input
                              type="checkbox"
                              id="policy-length"
                              disabled
                              class="mr-2"
                            />
                            <label
                              for="policy-length"
                              class="text-sm text-gray-600"
                              >8 أحرف على الأقل</label
                            >
                          </div>
                          <div class="flex items-center">
                            <input
                              type="checkbox"
                              id="policy-case"
                              disabled
                              class="mr-2"
                            />
                            <label
                              for="policy-case"
                              class="text-sm text-gray-600"
                              >حروف كبيرة وصغيرة</label
                            >
                          </div>
                          <div class="flex items-center">
                            <input
                              type="checkbox"
                              id="policy-symbols"
                              disabled
                              class="mr-2"
                            />
                            <label
                              for="policy-symbols"
                              class="text-sm text-gray-600"
                              >أرقام ورموز خاصة</label
                            >
                          </div>
                        </div>
                      </div>
                      <div class="flex items-center">
                        <input
                          type="checkbox"
                          id="force-change"
                          disabled
                          class="mr-2"
                        />
                        <label for="force-change" class="text-sm text-gray-600"
                          >تغيير كلمة المرور كل 90 يوم</label
                        >
                      </div>
                      <div class="flex items-center">
                        <input type="checkbox" id="2fa" disabled class="mr-2" />
                        <label for="2fa" class="text-sm text-gray-600"
                          >تفعيل المصادقة الثنائية</label
                        >
                      </div>
                      <div class="flex items-center">
                        <input
                          type="checkbox"
                          id="login-logs"
                          disabled
                          class="mr-2"
                        />
                        <label for="login-logs" class="text-sm text-gray-600"
                          >تسجيل محاولات تسجيل الدخول</label
                        >
                      </div>
                      <div class="flex items-center">
                        <input
                          type="checkbox"
                          id="account-lock"
                          disabled
                          class="mr-2"
                        />
                        <label for="account-lock" class="text-sm text-gray-600"
                          >قفل الحساب بعد 5 محاولات فاشلة</label
                        >
                      </div>
                    </div>
                  </div>

                  <!-- الإشعارات والتنبيهات -->
                  <div
                    id="notifications-settings"
                    class="settings-tab-content hidden p-5"
                  >
                    <div class="space-y-5">
                      <div class="space-y-3">
                        <div class="flex items-center justify-between">
                          <label
                            for="notif-booking"
                            class="text-sm text-gray-600"
                            >إشعارات الحجوزات الجديدة</label
                          >
                          <label class="switch">
                            <input
                              type="checkbox"
                              id="notif-booking"
                              disabled
                            />
                            <span class="slider round"></span>
                          </label>
                        </div>
                        <div class="flex items-center justify-between">
                          <label for="notif-login" class="text-sm text-gray-600"
                            >إشعارات تسجيل الدخول والخروج</label
                          >
                          <label class="switch">
                            <input type="checkbox" id="notif-login" disabled />
                            <span class="slider round"></span>
                          </label>
                        </div>
                        <div class="flex items-center justify-between">
                          <label
                            for="notif-maintenance"
                            class="text-sm text-gray-600"
                            >إشعارات الصيانة والمشاكل</label
                          >
                          <label class="switch">
                            <input
                              type="checkbox"
                              id="notif-maintenance"
                              disabled
                            />
                            <span class="slider round"></span>
                          </label>
                        </div>
                        <div class="flex items-center justify-between">
                          <label
                            for="notif-updates"
                            class="text-sm text-gray-600"
                            >إشعارات تحديثات النظام</label
                          >
                          <label class="switch">
                            <input
                              type="checkbox"
                              id="notif-updates"
                              disabled
                            />
                            <span class="slider round"></span>
                          </label>
                        </div>
                      </div>
                      <div>
                        <label
                          for="email-summary"
                          class="block text-sm font-medium text-gray-700 mb-1"
                          >ملخصات البريد</label
                        >
                        <select
                          id="email-summary"
                          disabled
                          class="w-full px-3 py-2 border border-gray-300 rounded text-sm bg-gray-100"
                        >
                          <option value="immediate">فوري</option>
                          <option value="hourly">تجميع كل ساعة</option>
                          <option value="6hours">تجميع كل 6 ساعات</option>
                          <option value="daily">تجميع يومي</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="bg-white rounded-xl shadow-md p-6">
                <h4 class="text-lg font-semibold text-gray-900 mb-5">
                  معلومات النظام
                </h4>

                <div class="grid grid-cols-1 md:grid-cols-1 gap-6 text-sm">
                  <!-- شعار المحطة -->
                  <div
                    class="border border-gray-200 rounded-lg p-4 flex flex-col items-center shadow-sm"
                  >
                    <h3 class="text-sm font-bold text-gray-700 mb-3">
                      شعار المحطة
                    </h3>

                    <!-- صورة الشعار أو الأيقونة البديلة -->
                    <div
                      class="w-32 h-32 border border-dashed border-gray-300 bg-gray-50 rounded-md flex items-center justify-center overflow-hidden mb-4"
                    >
                      <img
                        id="station-logo-img"
                        src="https://www.svgrepo.com/show/327408/image-placeholder.svg"
                        alt="شعار المحطة"
                        class="object-contain w-full h-full"
                      />
                    </div>

                    <!-- أزرار التحكم -->
                    <div class="flex gap-2">
                      <label
                        id="upload-logo-label"
                        class="bg-blue-600 text-white px-3 py-1.5 text-xs rounded-md cursor-pointer hover:bg-blue-700 transition"
                      >
                        جلب الصورة
                      </label>
                      <input
                        id="station-logo-input"
                        type="file"
                        accept="image/*"
                        class="hidden"
                        disabled
                      />

                      <button
                        id="delete-logo-btn"
                        type="button"
                        class="bg-red-500 text-white px-3 py-1.5 text-xs rounded-md hover:bg-red-600 transition"
                        disabled
                      >
                        حذف الصورة
                      </button>
                    </div>
                  </div>

                  <!-- معلومات النظام -->
                  <div class="space-y-3 grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <div class="text-gray-500">إصدار النظام</div>
                      <div class="font-medium">v2.5.3</div>
                    </div>
                    <div>
                      <div class="text-gray-500">آخر تحديث</div>
                      <div class="font-medium">15 أبريل 2025</div>
                    </div>
                    <div>
                      <div class="text-gray-500">الترخيص</div>
                      <div class="font-medium">Enterprise</div>
                    </div>
                    <div>
                      <div class="text-gray-500">تاريخ انتهاء الترخيص</div>
                      <div class="font-medium">31 ديسمبر 2025</div>
                    </div>
                  </div>
                </div>
                <br />
                <div class="pt-4 flex flex-col items-center shadow-sm">
                  <button
                    class="text-blue-600 hover:underline text-sm flex items-center"
                  >
                    <i class="ri-refresh-line ml-1"></i> التحقق من التحديثات
                  </button>
                </div>
              </div>
            </div>
          </div>

          <script>
            document.addEventListener("DOMContentLoaded", function () {
              // إعدادات API
              const API_BASE_URL =
                "http://localhost/power-station/api/index.php";
              const authToken = localStorage.getItem("authToken");

              // عناصر DOM
              const editBtn = document.getElementById("editBtn");
              const saveChangesBtn = document.getElementById("saveChangesBtn");
              const stationLogoInput =
                document.getElementById("station-logo-input");
              const stationLogoImg =
                document.getElementById("station-logo-img");
              const deleteLogoBtn = document.getElementById("delete-logo-btn");
              const uploadLogoLabel =
                document.getElementById("upload-logo-label");

              // عناصر الإعدادات العامة
              const arNameInput = document.getElementById("arName");
              const enNameInput = document.getElementById("en_Name");
              const arNameElectrycelInput =
                document.getElementById("arNameElectrycel");
              const enNameElectrycelInput =
                document.getElementById("enNameElectrycel");
              const arAddressInput = document.getElementById("ar_address");
              const enAddressInput = document.getElementById("en_address");
              const emailInput = document.getElementById("email");
              const phoneInput = document.getElementById("phone");
              const kiInput = document.getElementById("ki");
              const languageSelect = document.getElementById("language");
              const noteTextarea = document.getElementById("note");

              // عناصر إعدادات الأمان
              const policyStrongCheckbox =
                document.getElementById("policy-strong");
              const policyLengthCheckbox =
                document.getElementById("policy-length");
              const policyCaseCheckbox = document.getElementById("policy-case");
              const policySymbolsCheckbox =
                document.getElementById("policy-symbols");
              const forceChangeCheckbox =
                document.getElementById("force-change");
              const twoFactorCheckbox = document.getElementById("2fa");
              const loginLogsCheckbox = document.getElementById("login-logs");
              const accountLockCheckbox =
                document.getElementById("account-lock");

              // عناصر إعدادات الإشعارات
              const notifBookingCheckbox =
                document.getElementById("notif-booking");
              const notifLoginCheckbox = document.getElementById("notif-login");
              const notifMaintenanceCheckbox =
                document.getElementById("notif-maintenance");
              const notifUpdatesCheckbox =
                document.getElementById("notif-updates");
              const emailSummarySelect =
                document.getElementById("email-summary");

              // متغيرات عامة
              let stationData = null;
              let securitySettings = null;
              let notificationSettings = null;
              let isEditMode = false;
              let logoFile = null;
              let logoDeleted = false;

              // تحميل بيانات المحطة
              async function loadStationData() {
                try {
                  // الحصول على معرف المحطة (يمكن أن يكون من localStorage أو من المستخدم الحالي)
                  const stationId = localStorage.getItem("stationId") || 1; // قيمة افتراضية للتجربة

                  const response = await apiRequest(
                    `stations&action=GET&id=${stationId}`
                  );
                  if (response && response.length > 0) {
                    stationData = response[0];
                    populateStationForm();
                  }

                  // تحميل إعدادات الأمان
                  loadSecuritySettings();

                  // تحميل إعدادات الإشعارات
                  loadNotificationSettings();
                } catch (error) {
                  console.error("Error loading station data:", error);
                  alert("حدث خطأ في تحميل بيانات المحطة");
                }
              }

              // ملء نموذج بيانات المحطة
              function populateStationForm() {
                if (!stationData) return;

                arNameInput.value = stationData.OwnerNameAr || "";
                enNameInput.value = stationData.OwnerNameEn || "";
                arNameElectrycelInput.value = stationData.NameAr || "";
                enNameElectrycelInput.value = stationData.NameEn || "";
                enNameInput.value = stationData.NameEn || "";
                arAddressInput.value = stationData.AddressAr || "";
                enAddressInput.value = stationData.AddressEn || "";
                emailInput.value = stationData.Email || "";
                phoneInput.value = stationData.Phone || "";
                kiInput.value = stationData.KiloPrice || "";
                languageSelect.value = stationData.Language || "ar";
                noteTextarea.value = stationData.Note || "";

                // عرض الشعار إذا كان موجودًا
                if (stationData.LogoPath) {
                  stationLogoImg.src = stationData.LogoPath;
                } else if (stationData.LogoData) {
                  // إذا كان الشعار مخزنًا كبيانات ثنائية في قاعدة البيانات
                  stationLogoImg.src = `data:image/jpeg;base64,${stationData.LogoData}`;
                }
              }

              // تحميل إعدادات الأمان
              async function loadSecuritySettings() {
                try {
                  const response = await apiRequest(
                    "security-settings&action=GET_ALL"
                  );
                  if (response && response.length > 0) {
                    securitySettings = response[0];
                    populateSecurityForm();
                  }
                } catch (error) {
                  console.error("Error loading security settings:", error);
                }
              }

              // ملء نموذج إعدادات الأمان
              function populateSecurityForm() {
                if (!securitySettings) return;

                policyStrongCheckbox.checked =
                  securitySettings.StrongPassword === 1;
                policyLengthCheckbox.checked = securitySettings.MinLength === 1;
                policyCaseCheckbox.checked = securitySettings.RequireCase === 1;
                policySymbolsCheckbox.checked =
                  securitySettings.RequireSymbols === 1;
                forceChangeCheckbox.checked =
                  securitySettings.ForceChange === 1;
                twoFactorCheckbox.checked = securitySettings.TwoFactor === 1;
                loginLogsCheckbox.checked = securitySettings.LoginLogs === 1;
                accountLockCheckbox.checked =
                  securitySettings.AccountLock === 1;
              }

              // تحميل إعدادات الإشعارات
              async function loadNotificationSettings() {
                try {
                  const response = await apiRequest(
                    "notification-settings&action=GET_ALL"
                  );
                  if (response && response.length > 0) {
                    notificationSettings = response[0];
                    populateNotificationForm();
                  }
                } catch (error) {
                  console.error("Error loading notification settings:", error);
                }
              }

              // ملء نموذج إعدادات الإشعارات
              function populateNotificationForm() {
                if (!notificationSettings) return;

                notifBookingCheckbox.checked =
                  notificationSettings.BookingNotifications === 1;
                notifLoginCheckbox.checked =
                  notificationSettings.LoginNotifications === 1;
                notifMaintenanceCheckbox.checked =
                  notificationSettings.MaintenanceNotifications === 1;
                notifUpdatesCheckbox.checked =
                  notificationSettings.UpdateNotifications === 1;
                emailSummarySelect.value =
                  notificationSettings.EmailSummary || "immediate";
              }

              // تفعيل وضع التعديل
              function enableEditMode() {
                isEditMode = true;

                // تغيير حالة الأزرار
                editBtn.classList.add("hidden");
                saveChangesBtn.classList.remove("hidden");

                // تفعيل حقول الإعدادات العامة
                arNameInput.removeAttribute("readonly");
                arNameInput.classList.remove("bg-gray-100");

                enNameInput.removeAttribute("readonly");
                enNameInput.classList.remove("bg-gray-100");

                arNameElectrycelInput.removeAttribute("readonly");
                arNameElectrycelInput.classList.remove("bg-gray-100");

                enNameElectrycelInput.removeAttribute("readonly");
                enNameElectrycelInput.classList.remove("bg-gray-100");

                enNameInput.removeAttribute("readonly");
                enNameInput.classList.remove("bg-gray-100");

                arAddressInput.removeAttribute("readonly");
                arAddressInput.classList.remove("bg-gray-100");

                enAddressInput.removeAttribute("readonly");
                enAddressInput.classList.remove("bg-gray-100");

                emailInput.removeAttribute("readonly");
                emailInput.classList.remove("bg-gray-100");

                phoneInput.removeAttribute("readonly");
                phoneInput.classList.remove("bg-gray-100");

                kiInput.removeAttribute("readonly");
                kiInput.classList.remove("bg-gray-100");

                languageSelect.removeAttribute("disabled");
                languageSelect.classList.remove("bg-gray-100");

                noteTextarea.removeAttribute("readonly");
                noteTextarea.classList.remove("bg-gray-100");

                // تفعيل حقول الأمان
                policyStrongCheckbox.removeAttribute("disabled");
                policyLengthCheckbox.removeAttribute("disabled");
                policyCaseCheckbox.removeAttribute("disabled");
                policySymbolsCheckbox.removeAttribute("disabled");
                forceChangeCheckbox.removeAttribute("disabled");
                twoFactorCheckbox.removeAttribute("disabled");
                loginLogsCheckbox.removeAttribute("disabled");
                accountLockCheckbox.removeAttribute("disabled");

                // تفعيل حقول الإشعارات
                notifBookingCheckbox.removeAttribute("disabled");
                notifLoginCheckbox.removeAttribute("disabled");
                notifMaintenanceCheckbox.removeAttribute("disabled");
                notifUpdatesCheckbox.removeAttribute("disabled");
                emailSummarySelect.removeAttribute("disabled");
                emailSummarySelect.classList.remove("bg-gray-100");

                // تفعيل أزرار الشعار
                stationLogoInput.removeAttribute("disabled");
                deleteLogoBtn.removeAttribute("disabled");
              }

              // تعطيل وضع التعديل
              function disableEditMode() {
                isEditMode = false;

                // تغيير حالة الأزرار
                editBtn.classList.remove("hidden");
                saveChangesBtn.classList.add("hidden");

                // تعطيل حقول الإعدادات العامة
                arNameInput.setAttribute("readonly", true);
                arNameInput.classList.add("bg-gray-100");

                enNameInput.setAttribute("readonly", true);
                enNameInput.classList.add("bg-gray-100");

                arNameElectrycelInput.setAttribute("readonly", true);
                arNameElectrycelInput.classList.add("bg-gray-100");

                enNameInput.setAttribute("readonly", true);
                enNameInput.classList.add("bg-gray-100");

                arAddressInput.setAttribute("readonly", true);
                arAddressInput.classList.add("bg-gray-100");

                enAddressInput.setAttribute("readonly", true);
                enAddressInput.classList.add("bg-gray-100");

                emailInput.setAttribute("readonly", true);
                emailInput.classList.add("bg-gray-100");

                phoneInput.setAttribute("readonly", true);
                phoneInput.classList.add("bg-gray-100");

                kiInput.setAttribute("readonly", true);
                kiInput.classList.add("bg-gray-100");

                languageSelect.setAttribute("disabled", true);
                languageSelect.classList.add("bg-gray-100");

                noteTextarea.setAttribute("readonly", true);
                noteTextarea.classList.add("bg-gray-100");

                // تعطيل حقول الأمان
                policyStrongCheckbox.setAttribute("disabled", true);
                policyLengthCheckbox.setAttribute("disabled", true);
                policyCaseCheckbox.setAttribute("disabled", true);
                policySymbolsCheckbox.setAttribute("disabled", true);
                forceChangeCheckbox.setAttribute("disabled", true);
                twoFactorCheckbox.setAttribute("disabled", true);
                loginLogsCheckbox.setAttribute("disabled", true);
                accountLockCheckbox.setAttribute("disabled", true);

                // تعطيل حقول الإشعارات
                notifBookingCheckbox.setAttribute("disabled", true);
                notifLoginCheckbox.setAttribute("disabled", true);
                notifMaintenanceCheckbox.setAttribute("disabled", true);
                notifUpdatesCheckbox.setAttribute("disabled", true);
                emailSummarySelect.setAttribute("disabled", true);
                emailSummarySelect.classList.add("bg-gray-100");

                // تعطيل أزرار الشعار
                stationLogoInput.setAttribute("disabled", true);
                deleteLogoBtn.setAttribute("disabled", true);
              }

              // حفظ التغييرات
              async function saveChanges() {
                try {
                  // حفظ بيانات المحطة
                  await saveStationData();

                  // حفظ إعدادات الأمان
                  await saveSecuritySettings();

                  // حفظ إعدادات الإشعارات
                  await saveNotificationSettings();

                  // الخروج من وضع التعديل
                  disableEditMode();

                  alert("تم حفظ التغييرات بنجاح");
                } catch (error) {
                  console.error("Error saving changes:", error);
                  alert("حدث خطأ في حفظ التغييرات");
                }
              }

              // حفظ بيانات المحطة
              async function saveStationData() {
                const stationId = stationData ? stationData.StationID : null;
                const action = stationId ? "UPDATE" : "ADD";

                const stationPayload = {
                  NameAr: arNameElectrycelInput.value,
                  NameAr: enNameElectrycelInput.value,
                  NameEn: enNameInput.value,
                  AddressAr: arAddressInput.value,
                  AddressEn: enAddressInput.value,
                  OwnerNameAr: arNameInput.value,
                  OwnerNameEn: enNameInput.value,
                  Phone: phoneInput.value,
                  Email: emailInput.value,
                  KiloPrice: kiInput.value,
                  Language: languageSelect.value,
                  Note: noteTextarea.value,
                  LogoPath: logoDeleted
                    ? null
                    : stationData
                    ? stationData.LogoPath
                    : null,
                  LogoData: logoFile
                    ? await fileToBase64(logoFile)
                    : logoDeleted
                    ? null
                    : stationData
                    ? stationData.LogoData
                    : null,
                };

                const response = await apiRequest(
                  `stations&action=${action}${
                    stationId ? `&id=${stationId}` : ""
                  }`,
                  action === "UPDATE" ? "PUT" : "POST",
                  stationPayload
                );

                if (response && response.success) {
                  if (action === "ADD") {
                    stationData = {
                      ...stationPayload,
                      StationID: response.id,
                    };
                    localStorage.setItem("stationId", response.id);
                  } else {
                    stationData = {
                      ...stationData,
                      ...stationPayload,
                    };
                  }

                  // إعادة تعيين متغيرات الشعار
                  logoFile = null;
                  logoDeleted = false;

                  return true;
                }

                return false;
              }

              // حفظ إعدادات الأمان
              async function saveSecuritySettings() {
                if (!securitySettings) return true;

                const securityPayload = {
                  StrongPassword: policyStrongCheckbox.checked ? 1 : 0,
                  MinLength: policyLengthCheckbox.checked ? 1 : 0,
                  RequireCase: policyCaseCheckbox.checked ? 1 : 0,
                  RequireSymbols: policySymbolsCheckbox.checked ? 1 : 0,
                  ForceChange: forceChangeCheckbox.checked ? 1 : 0,
                  TwoFactor: twoFactorCheckbox.checked ? 1 : 0,
                  LoginLogs: loginLogsCheckbox.checked ? 1 : 0,
                  AccountLock: accountLockCheckbox.checked ? 1 : 0,
                };

                const response = await apiRequest(
                  `security-settings&action=UPDATE&id=${securitySettings.SettingID}`,
                  "PUT",
                  securityPayload
                );

                if (response && response.success) {
                  securitySettings = {
                    ...securitySettings,
                    ...securityPayload,
                  };
                  return true;
                }

                return false;
              }

              // حفظ إعدادات الإشعارات
              async function saveNotificationSettings() {
                if (!notificationSettings) return true;

                const notificationPayload = {
                  BookingNotifications: notifBookingCheckbox.checked ? 1 : 0,
                  LoginNotifications: notifLoginCheckbox.checked ? 1 : 0,
                  MaintenanceNotifications: notifMaintenanceCheckbox.checked
                    ? 1
                    : 0,
                  UpdateNotifications: notifUpdatesCheckbox.checked ? 1 : 0,
                  EmailSummary: emailSummarySelect.value,
                };

                const response = await apiRequest(
                  `notification-settings&action=UPDATE&id=${notificationSettings.SettingID}`,
                  "PUT",
                  notificationPayload
                );

                if (response && response.success) {
                  notificationSettings = {
                    ...notificationSettings,
                    ...notificationPayload,
                  };
                  return true;
                }

                return false;
              }

              // معاينة الشعار
              function previewLogo(event) {
                const file = event.target.files[0];
                if (file) {
                  logoFile = file;
                  logoDeleted = false;

                  const reader = new FileReader();
                  reader.onload = function (e) {
                    stationLogoImg.src = e.target.result;
                  };
                  reader.readAsDataURL(file);
                }
              }

              // حذف الشعار
              function deleteLogo() {
                if (confirm("هل أنت متأكد من حذف الشعار؟")) {
                  logoDeleted = true;
                  logoFile = null;
                  stationLogoImg.src =
                    "https://www.svgrepo.com/show/327408/image-placeholder.svg";
                  stationLogoInput.value = null;
                }
              }

              // تحويل الملف إلى Base64
              function fileToBase64(file) {
                return new Promise((resolve, reject) => {
                  const reader = new FileReader();
                  reader.readAsDataURL(file);
                  reader.onload = () => {
                    // إزالة بادئة data:image/...;base64,
                    const base64String = reader.result.split(",")[1];
                    resolve(base64String);
                  };
                  reader.onerror = (error) => reject(error);
                });
              }

              // دالة طلب API
              async function apiRequest(endpoint, method = "GET", data = null) {
                const options = {
                  method: method,
                  headers: {
                    "Content-Type": "application/json",
                    Authorization: `Bearer ${authToken}`,
                  },
                };

                if (data) {
                  options.body = JSON.stringify(data);
                }

                try {
                  const response = await fetch(
                    `${API_BASE_URL}?endpoint=${endpoint}`,
                    options
                  );
                  const result = await response.json();

                  if (!response.ok) {
                    throw new Error(result.error || "Request failed");
                  }

                  return result;
                } catch (error) {
                  console.error("API Error:", error);
                  throw error;
                }
              }

              // أحداث الأزرار
              editBtn.addEventListener("click", enableEditMode);
              saveChangesBtn.addEventListener("click", saveChanges);

              // أحداث الشعار
              stationLogoInput.addEventListener("change", previewLogo);
              deleteLogoBtn.addEventListener("click", deleteLogo);

              // أحداث التبويبات الفرعية
              document.querySelectorAll(".tab-button").forEach((btn) => {
                btn.addEventListener("click", function () {
                  // تحديث التبويب النشط
                  document
                    .querySelectorAll(".tab-button")
                    .forEach((b) => b.classList.remove("active"));
                  this.classList.add("active");

                  // تحديث المحتوى
                  document
                    .querySelectorAll(".settings-tab-content")
                    .forEach((content) => {
                      content.classList.remove("active");
                      content.classList.add("hidden");
                    });

                  const tabId = this.getAttribute("data-settings-tab");
                  const tabContent = document.getElementById(
                    `${tabId}-settings`
                  );
                  tabContent.classList.add("active");
                  tabContent.classList.remove("hidden");
                });
              });

              // تحميل البيانات عند بدء الصفحة
              loadStationData();
            });
          </script>
        </div>
      </main>
    </div>
    <script>
      // Settings Tab Switching (مع حفظ الحالة في localStorage)
      const settingsTabButtons = document.querySelectorAll(
        "[data-settings-tab]"
      );
      const settingsTabContents = document.querySelectorAll(
        ".settings-tab-content"
      );
      const STORAGE_KEY = "activeSettingsTab";

      function activateSettingsTab(tabId) {
        settingsTabButtons.forEach((btn) => btn.classList.remove("active"));
        settingsTabContents.forEach((content) => {
          content.classList.remove("active");
          content.classList.add("hidden");
        });

        const targetButton = document.querySelector(
          `[data-settings-tab="${tabId}"]`
        );
        const targetContent = document.getElementById(`${tabId}-settings`);

        if (targetButton && targetContent) {
          targetButton.classList.add("active");
          targetContent.classList.add("active");
          targetContent.classList.remove("hidden");
          localStorage.setItem(STORAGE_KEY, tabId);
        }
      }

      settingsTabButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const tabId = button.getAttribute("data-settings-tab");
          activateSettingsTab(tabId);
        });
      });

      const savedSettingsTab = localStorage.getItem(STORAGE_KEY) || "general";
      activateSettingsTab(savedSettingsTab);
    </script>
    <script src="../assets/js/common.js"></script>
  </body>
</html>
